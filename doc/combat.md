进入战斗, 己方组5人 对方组5人 
actor类型: 玩家 BB 电脑 其他玩家

战斗指令: 物理攻击, 法术攻击(单法 群法 封印), 吃药, 特技, 加buff, 加debuff

1. 每回合倒计时30s
2. 每个玩家发出自己的战斗指令到服务器, 服务器接收每个玩家发出的战斗指令, 排序, 伤害计算. 下发. 计算回合总时间,下发.
3. 服务器倒计时回合时间, 时间到,进入下一个回合倒计时.
4. 客户端收到回合时间,还有完整的战斗指令后, 本地进行动画播放. 播放后,等待服务器下一个回合倒计时.
5. 服务器客户端之间的延时


客户端战斗表现设计

战斗环境：
PVP 最多5V5  每个Actor可以召唤自己的宝宝
PVE 最多5V10  对方是NPC 或者 普通Actor
战斗分两组 自己组（SelfActors）  对方组（EnemyActors）
回合制战斗机制：
1. 回合开始，倒计时等待战斗指令的输入
2. 战斗指令进行排序
3. 上一回合的战斗指令处理
4. 本回合战斗指令处理
5. 回合结束，进入下一个回合

1. 攻击类

攻击类动画表现为 master移动到target进行攻击 

状态机阶段:
				非防御						防御
[普通攻击] 	   受击动作+普通受击效果		防御动作+防御效果							
[攻击类技能]   受击动作+技能受击效果		防御动作+技能受击效果  

				是否连击 是否暴击 是否吸血 
普通攻击 			Y 		Y		Y
攻击类技能					Y 		Y 



攻击类技能也包括暴击

普通攻击时, 如果对方处于防御状态, 伤害减半
普通攻击时, 有可能出现连击, 暴击, 吸血, 被反震, 被反击, 击飞目标, 击倒目标

攻击技能流程:

攻击者	待战 -> 跑去 -> 攻击       -> 跑回 ->  待战
受击者	待战              受击                    待战

2. 法术类

3. 法术攻击指令


技能表里的技能都是瞬时的 当前回合释放后处理
技能释放后,可能产生buff到target的身上,
每回合会对buff做统一处理 例如表现效果展示 , 计算血量 等等

每回合读完所有战斗指令 根据actor速度模拟战斗指令释放,计算结果
回合开始后,对战斗指令进行播放
回合结束, 只用退出播放就行了.


atk_skill = {
    type = 'atk',
    atk_anim = '',
    combo,
    group_kill,
    buff_id,
    base_damage,
    is_suck_blood,
    is_critical_atk,
}

cast_skill = {
    type = 'cast',
    cast_anim,
    buff_id
}

buff = {
    turn_count,
    curr_turn,
    buff_state_anim,
    buff_props
}


播放攻击指令
待战-> 跑去-> 攻击 -> 
读取攻击技能id, 是否有combo , 是否是群秒, 是否产生暴击, 是否吸血, 攻击效果, 是否会添加buff
添加buff的话, 添加后 调用buffOnStart
-> 跑回 -> 结束
播放施法指令


攻击指令
    如果group_kill , 则有group_kill个完整攻击流程
攻击流程
    每个攻击流程,如果有combo,则有combo次攻击动作
攻击动作
    每次攻击动作触发一次伤害,每次攻击有可能吸血,反震,反击,防御,播放攻击动画等.

attack = {
    master,
    target,
    skill_id,
}


物理攻击 : 连击 暴击 吸血 单体攻击 群体攻击 受击动画
    普攻 
    法术物理攻击 

法术攻击 : 法术连击 法术暴击 单法 群法 受击动画


封印 : 单封 群封 无受击

辅助 : 加血 单加 群加


特技 : 

复杂动画:
后发制人
横扫千军
破釜沉舟
龙卷雨击
飞砂走石
漫天花雨

　
　　10级：灵力17 13
　　20级：灵力30 13
　　30级：灵力43 12
　　40级：灵力55 13
　　50级：灵力68 12
　　60级：灵力80 13
　　70级：灵力93 13
　　80级：灵力106 12 
　　90级：灵力118 13
　　100级：灵力131 12
　　110级：灵力143 13
　　120级：灵力156 13
　　130级：灵力169 12
　　140级：灵力181 13
　　150级：灵力194
　


八、修炼公式：
修炼后伤害加成公式：an=1.02^n *(a+250)-250 ，其中a为原始伤害，n为修炼级数（n≤20）
以原始伤害a=400为例，修炼10级(n=10)后，an=1.219*(400+250)-250=542.3，增幅35.6％；修炼20级(n=20)后，an=1.486*(400+250)-250=715.9，增幅79.0%。
封系成功率提高公式：an = a*1.02^n
修炼后伤害减成公式(防御、抗法)：an = 0.98^n *（a+250）-250
以原始伤害a=400为例，修炼10级(n=10)后an=281.1，减幅29.7%；修炼20级(n=20)后，an=183.9，减幅54.0%。
简评：1.02^20=1.486=148.6%，0.98^20=0.668=66.8%可见伤害和防御提升的效果是受控的，250和1.02/0.98都是调整因子，实现了公式的柔性。


十、固定伤害的法术公式：
普陀 五行术伤害=SKILL*3+50 ；紧箍咒伤害（每回合）=SKILL*1+10
龙宫 龙吟=SILL+10 ；减mp伤害＝（skill＋10）×0.8（霹雳三打提出更改）
地府 判官令=SKILL*3+75 ；毒伤害=初始对方气血最大值/10，持续SKILL*1
盘丝 勾魂=SKILL*3+对方当前HP*5% ；姐妹同心MP伤害=SKILL*5
摄魄=SKILL*3 吸取 SKILL*1.5自身补充
简评：因目前职业所限暂无研究。


封印

封印类法术成功率：

当技能等级小于对方等级时：

封法成功率={0.9^|技能等级-对方等级|}*60%

当技能等级大于对方等级时

封法成功率={0.98-0.38*0.975^(技能等级-对方等级)}

其中0.98几率上限系数，0.38表示几率的波动范围系数，0.975几率增加系数，0.9几率衰减系数。

修炼对封印的影响：

修炼影响=*（1±0.02）^|攻击方对应修炼等级-防御方对应修炼等级|-0.25*{1-（1±0.02）^|攻击方对应修炼等级-防御方对应修炼等级| }

由以上公式可以看出,基本的技能成功率为60%左右。当技能等级低于对方等级时，封印成功率由60%快速衰减。而技能等级高于对方等级时，随着技能等级的提高，每级别技能的增加效果越来越小，并存在几率上限。

12门派回门派技能坐标
大唐132,20
化生22,14
方寸72,106
女儿27,117
狮驼58,7
魔王81,37
盘丝174,72
地府40,58
龙宫72,37
天宫215,25
五庄15，13
普陀11，58


NPC坐标 （朝向：右下0、左下1、左上2、右上3）
龙窟二层 	龙神（113，30）      朝向（右下）
龙窟三层 	超级巫医（48，15）   朝向（右下）
龙窟六层 	超级巫医（46，38）   朝向（左下）
龙窟七层 	青灵玄女（68，41）   朝向（右上）

凤巢一层 	辛发明（88，43）     朝向（左下）
凤巢三层 	超级巫医（26，31）   朝向（右下）
凤巢六层 	超级巫医（90，57）   朝向（左下）
凤巢七层 	无心（87，46）       朝向（右下）

北俱芦洲   传送女娲（14，156）   朝向（右下）

女娲神迹   神殿守护者（45，36）  朝向（左下）
女娲神迹   超级巫医（88，58）    朝向（左下）


场景传送圈坐标
北俱芦洲（8，83）→龙窟一层（151，5）
北俱芦洲（82，152）→凤巢一层（78，66）

龙窟一层（154，4）→北俱芦洲（11，80）
龙窟一层（10，70）→龙窟二层（127，22）
龙窟二层（133，24）→龙窟一层（14，69）
龙窟二层（19，5）→龙窟三层（11，75）
龙窟三层（12，80）→龙窟二层（22，6）
龙窟三层（134，24）→龙窟四层（7，5）
龙窟四层（4，6）→龙窟三层（131，26）
龙窟四层（122，28）→龙窟五层（130，63）
龙窟五层（131，64）→龙窟四层（125，26）
龙窟五层（53，9）→龙窟六层（84，13）
龙窟六层（81，14）→龙窟五层（51，10）
龙窟六层（121，61）→龙窟七层（8，74）
龙窟七层（5，77）→龙窟六层（117，62）

凤巢一层（81，69）→北俱芦洲（85，149）
凤巢一层（46，4）→凤巢二层（40，65）
凤巢二层（44，68）→凤巢一层（48，6）
凤巢二层（125，43）→凤巢三层（13，55）
凤巢三层（10，57）→凤巢二层（122，45）
凤巢三层（124，3）→凤巢四层（15，57）
凤巢四层（11，59）→凤巢三层（120，5）
凤巢四层（76，69）→凤巢五层（77，6）
凤巢五层（74，3）→凤巢四层（71，65）
凤巢五层（116，69）→凤巢六层（6，7）
凤巢六层（125，45）→凤巢七层（6，40）
凤巢七层（2，36）→凤巢六层（122，42）


传送女娲（14，156）→女娲神迹（40，31）
神殿守护者（45，36）→北俱芦洲（13，148）
传送女娲：朝向（右下）
我是上古神殿的传送使者，无数守护者千万年来一直在神殿内看守着，进去的话可要先衡量一下自己的实力。
请送我进去。
我想了解一下神迹的事情。
我只是路过这里顺便瞻仰一下。

我想了解一下神迹的事情。
在中国的神话传说中，女娲是人类的始祖，至高无上的创世神。女娲神迹是颂扬其精神的所在，悬浮于极北端的天空之中，自北俱芦洲传达才可到达。近日神殿受到外来邪恶力量的冲击，试图进入的人都要经过考验才行。




一、	比满经验等级少1到５级拿80％经验。比满经验等级少６到10级拿70％经验。														
	比满经验等级少11到15级拿60％经验。比满经验等级少16到20级拿50％经验。														
	比满经验等级多11级以上开始掉经验，多11到15级时拿80％经验。														
															
二、	经验获得按队伍人数相乘，单人获得基础经验，满五人获得基础经验×5，宝宝经验一致。														
															
三、	野外练级地点受双倍、三倍影响，队员按自身条件获得相对应的经验。														
		例子：组队五人，队员等级比满经验等级多11级，开双倍，那么获得的经验=基础经验×80%（高11级拿80%经验）×5（队员人数）×2（双倍）。													
															
四、	双击直达：	练级地点经验!A1													
															



师门技能花费			返回目录
等级	经验	师门金钱	
1	16	6	
2	32	12	
3	52	19	
4	75	28	
5	103	38	
6	136	51	
7	179	67	
8	231	86	
9	295	110	
			
10	372	139	
11	466	174	
12	578	216	
13	711	266	
14	867	325	
15	1049	393	
16	1260	472	
17	1503	563	
18	1780	667	
19	2096	786	
			
20	2452	919	
21	2854	1070	
22	3304	1238	
23	3807	1426	
24	4364	1636	
25	4983	1868	
26	5664	2124	
27	6415	2404	
28	7238	2714	
29	8138	3050	
			
30	9120	3420	
31	10188	3820	
32	11347	4255	
33	12602	4725	
34	13959	5234	
35	15423	5783	
36	16998	6374	
37	18692	7009	
38	20508	7690	
39	22452	8419	
			
40	24532	9199	
41	26753	10032	
42	29121	10920	
43	31642	11865	
44	34323	12871	
45	37169	13938	
46	40188	15070	
47	43388	16270	
48	46773	17540	
49	50352	18882	
			
50	54132	20299	
51	58120	21795	
52	62324	23371	
53	66750	25031	
54	71407	26777	
55	76303	28613	
56	81444	30541	
57	86840	32565	
58	92500	34687	
59	98430	36911	
			
60	104640	39240	
61	111136	41676	
62	117931	44224	
63	125031	46886	
64	132444	49666	
65	140183	52568	
66	148253	55595	
67	156666	58749	
68	165430	62036	
69	174556	65458	
			
70	184052	69019	
71	193930	72723	
72	204198	76574	
73	214868	80575	
74	225948	84730	
75	237449	89043	
76	249383	93518	
77	261760	98160	
78	274589	102971	
79	287884	107956	
			
80	301652	113119	
81	315908	118465	
82	330662	123998	
83	345924	129721	
84	361708	135640	
85	378023	141758	
86	394882	148080	
87	412297	154611	
88	430280	161355	
89	448844	168316	
			
90	468000	175500	
91	487760	182910	
92	508137	190551	
93	529145	198429	
94	550796	206548	
95	573103	214913	
96	596078	223529	
97	619735	232400	
98	644088	241533	
99	669149	250931	
			
100	694932	260599	
101	721452	270544	
102	748722	280770	
103	776755	291283	
104	805566	302087	
105	835169	313188	
106	865579	324592	
107	896809	336303	
108	928876	348328	
109	961792	360672	
			
110	995572	373339	
111	1030234	386337	
112	1065190	399671	
113	1102256	413346	
114	1139649	427368	
115	1177983	441743	
116	1217273	456477	
117	1256104	471576	
118	1298787	487045	
119	1341043	502891	
			
120	1384320	519120	
121	1428632	535737	
122	1473999	552749	
123	1520435	570163	
124	1567957	587984	
125	1616583	606218	
126	1666328	624873	
127	1717211	643954	
128	1769248	663468	
129	1822456	683421	
			
130	1876852	703819	
131	1932456	724671	
132	1989284	745981	
133	2047353	767757	
134	2106682	790005	
135	2167289	812733	
136	2229192	835947	
137	2292410	859653	
138	2356960	883860	
139	2422861	908573	
			
140	2490132	933799	
141	2558792	959547	
142	2628860	985822	
143	2700356	1012633	
144	2773296	1039986	
145	2847703	1067888	
146	2923593	1096347	
147	3000989	1125371	
148	3079908	1154965	
149	3160372	1185139	
			
150	3242400	1215900	
151	6652022	2494508	
152	6822452	2558419	
153	6996132	2623549	
154	7173104	2689914	
155	7353406	2757527	
156	11305620	4239607	
157	11586254	4344845	
158	11872072	4452027	
159	12163140	4561177	
160	12459518	4672319	
161	15033471	450041	
162	15315219	4594563	
162	15600468	4680138	
164	15889236	4766769	
165	16181550	4854465	
166	16477425	4943226	
167	16776885	5033064	
168	17079954	5123985	
169	17386650	5215995	
170	17697000	5309100	
171	24014692	7204407	
172	24438308	7331490	
173	24866880	7460064	
174	25300432	7590129	
175	25739000	7721700	
176	32728255	9818475	
177	33289095	9986727	
178	33856310	10156893	
179	34492930	10328979	
180	40842000	12252600	

辅助技能NPC学习消耗				返回目录
技能等级	经验	金钱	人气	
1	2001	301	1	
2	2008	308	1	
3	2027	327	1	
4	2064	364	1	
5	2125	425	2	
6	2216	516	2	
7	2343	643	2	
8	2512	812	2	
9	2729	1029	2	
10	3000	1300	3	
11	3331	1631	3	
12	3728	2028	3	
13	4197	2497	3	
14	4744	3044	3	
15	5375	3675	4	
16	6096	4396	4	
17	6913	5213	4	
18	7832	6132	4	
19	8859	7159	4	
20	10000	8300	5	
21	11261	9561	5	
22	12648	10948	5	
23	14167	12467	5	
24	15824	14124	5	
25	17625	15925	6	
26	19576	17876	6	
27	21683	19983	6	
28	23952	22252	6	
29	26389	24689	6	
30	29000	27300	7	
31	31791	30091	7	
32	34768	33068	7	
33	37937	36237	7	
34	41304	39604	7	
35	44875	43175	8	
36	48656	46956	8	
37	52653	50953	8	
38	56872	55172	8	
39	61319	59619	8	
40	66000	64300	9	

场景	怪物等级	怪物类型	掉落物品	返回目录
东海湾	10	大海龟	（部分1级药品，宠物口粮）	
沉船1层	10	巨蛙、大海龟	（0级武器，10级武器，部分1级药品）	
沉船2层	10	巨蛙、海毛虫	（0级武器，10级武器，部分1级药品）	
东海岩洞	10	大海龟、巨蛙、海毛虫	（0级武器，10级武器，部分1级药品）	
江南野外	10	树怪、野猪	（10级防具，10级武器，部分1级药品）	
大雁塔1层	10	赌徒、强盗、骷髅怪、羊头怪、蛤蟆精、狐狸精	（10级防具，20级武器，宠物口粮，天不老，血色茶花）	
大雁塔2层	14	赌徒、强盗、羊头怪、狐狸精	（20级防具，20级武器，宠物口粮，仙狐涎，麝香）	
大雁塔3层	18	骷髅怪、羊头怪、蛤蟆精、狐狸精、花妖	（20级防具，20级武器，30级武器，30级防具，宠物口粮，天不老，血色茶花，仙狐涎，麝香）	
大雁塔4层	22	骷髅怪、羊头怪、蛤蟆精、狐狸精、花妖	（20级防具，20级武器，30级武器，30级防具，宠物口粮，天不老，血色茶花，仙狐涎，麝香）	
大雁塔5层	26	骷髅怪、羊头怪、蛤蟆精、狐狸精、花妖	（20级防具，20级武器，30级武器，30级防具，宠物口粮，天不老，血色茶花，仙狐涎，麝香）	
大雁塔6层	30	羊头怪、蛤蟆精、狐狸精、大蝙蝠、花妖	（30级防具，40级武器，1级暗器，宠物口粮）	
大唐国境	20	赌徒、强盗、山贼	（10级防具，20级武器，宠物口粮，部分1级药品）	
大唐境外	30	老虎、黑熊、花妖	（20级防具，20级武器，宠物口粮，白露为霜）	
魔王寨	30	牛妖、蛤蟆精	（40级防具，40级武器，宠物口粮，4级暗器）	
普陀山	30	黑熊精	（40级武器，宠物口粮，3级暗器，熊胆，餐风饮露）	
盘丝岭	40	蜘蛛精、狐狸精、花妖	（50级武器，2级暗器，,天不老,血色茶花，仙狐涎，麝香）	
狮驼岭	50	雷鸟人、蝴蝶仙子	（40级防具，40级武器，高级宠物口粮，5级暗器）	
西牛贺洲	30	小龙女、狼	（30级防具，30级武器，鹿茸，天龙水）	
花果山	30	小龙女、老虎、黑熊	（鹿茸，天龙水，熊胆，餐风饮露）	
海底迷宫一	30	虾兵	（鹿茸，天龙水，血珊瑚，高级宠物口粮）	
海底迷宫二	30	蟹将	（鹿茸，天龙水，血珊瑚）	
海底迷宫三	30	龟丞相	（鹿茸，天龙水，血珊瑚）	
海底迷宫四	30	蟹将,龟丞相	（50级武器，鹿茸，天龙水，血珊瑚）	
月宫	40	兔子怪	（高级宠物口粮）	
地府迷宫一	40	野鬼、僵尸	（高级宠物口粮，地狱灵芝，40级武器）	
地府迷宫二	40	野鬼、骷髅怪	（高级宠物口粮，地狱灵芝，40级防具）	
地府迷宫三	40	僵尸、牛头、马面	（高级宠物口粮，50级武器，地狱灵芝）	
地府迷宫四	40	僵尸、骷髅怪	（高级宠物口粮，50级防具，地狱灵芝）	
北俱芦洲	40	古代瑞兽、白熊、天将	（60级防具，硫磺草，高级宠物口粮）	
龙窟一层	60	古代瑞兽、黑山老妖	（60级防具，硫磺草，高级宠物口粮）	
龙窟二层	70	白熊、黑山老妖	（60级防具，硫磺草）	
龙窟三层	70	天兵、风伯	（60级防具，硫磺草）	
龙窟四层	70	蛟龙、风伯	（70级防具，龙之心屑，高级宠物口粮）	
龙窟五层	70	地狱战神、蛟龙	（70级防具，龙之心屑，8级暗器）	
龙窟六层	80	雨师、巡游天神	（70级防具，龙之心屑，月星子，9级暗器）	
龙窟七层	90	地狱战神、巡游天神、星灵仙子、蛟龙、阴阳伞	（70级防具，70级武器，龙之心屑，月星子）	
凤巢一层	60	黑山老妖、天将	（60级武器，孔雀红）	
凤巢二层	60	天兵、雷鸟人	（60级武器，孔雀红，7级暗器）	
凤巢三层	70	地狱战神、天兵	（60级武器，孔雀红）	
凤巢四层	70	凤凰、天将	（70级武器，孔雀红，高级宠物口粮）	
凤巢五层	80	凤凰、天将	（70级武器，孔雀红，高级宠物口粮）	
凤巢六层	85	风伯、芙蓉仙子	（70级武器，凤凰尾，火凤之睛，高级宠物口粮，10级暗器）凤巢七层	
凤巢七层	90	风伯、凤凰、如意仙子、芙蓉仙子、阴阳伞	（70级武器，80级武器，凤凰尾，火凤之睛）	
麒麟山	90	鼠先锋、百足将军、野猪精	（70-80级武器，70-80级装备，各种2药）	
无名鬼城	100	幽灵、吸血鬼、鬼将、阴阳伞	（各种2级药,80装备）	
女娲神迹	100	律法女娲、灵符女娲、净瓶女娲、阴阳伞	（10-100暗器,80武器）	
小西天	120	夜罗刹、炎魔神、噬天虎、阴阳伞		
小雷音寺	120	大力金刚、雾中仙、灵鹤、阴阳伞		
蓬莱仙岛	130	红萼仙子、踏云兽、龙龟、阴阳伞		
墨家禁地	140	机关人、机关鸟、机关兽、连弩车、巴蛇、阴阳伞		


【女儿村】暗器伤害效果的计算公式 暗器技巧：Lv；暗器命中：d；秒敌人数：n；则，暗器伤害效果为：A={d+50+[Lv+(Lv*Lv/150)]*(11-n)/10}；(对人)B=(A*1.3)；(对怪)注：1. 以上公式中的：( )、[ ]、{ }不但具有括号的效果，均还具有取整的意思。 例：( 2.563)=2，[3.1 ]=3，{9.987 }=9.2. 没有高级别女儿村ID，因此对女儿秒6到秒7是否降伤害不确定， 希望高级别女儿给予答复，不胜感激！ 答：根据5楼水灵幻MM的答复，暗器秒六到秒七是不会降伤害的！谢谢提供！3. 附带女儿村暗器伤害表(秒人)，暗器技巧：120.4.附带水灵幻提供的不同等级暗器技巧的伤害加成。(暗器命中：100)


---2019年11月30日 17:23:31

actor属性同步 

1. 同步范围  只同步给自己 同步给他人，同步给他人的范围，AOI范围内，还是全服都同步
2. 同步频率 按帧同步，固定间隔同步
3. 同步/不同步 


TODOLIST：
2019年12月10日：

1. 动画方面
2. 数据持久化方面
3. 插件方面
4. 模块化方面
5. 同步方式
6. PROTOCOL


skill：


skill 对象用来做表现

战斗指令可以等价为skill队列


攻击 施法 特技 道具 捕捉 召唤 召还 逃跑 防御 保护

攻击：跑去 攻击 跑回
施法+特技+道具： 施法
捕捉：宠物跑去，召唤兽回来
召唤/招还：替换自己宠物
逃跑：自己逃跑
防御：加一层防御buff，被攻击的时候播放动画

攻击：普通攻击 可能有暴击 吸血（判断是否有被动技能） 连击（判断是否有被动技能） 反击 反震

施法：


--聊天背景框 wzife 39D3BD99 


1. 攻击性技能
逻辑 ： 
    Atk HP+ 
    Def HP-
    combo攻击 Def--
    群体攻击 Def_HP1 - Def_HP2- 
    Def倒地（死亡），Def被击飞
    被保护Def_HP1- Def_HP2-
表现 ：
    单体攻击 群体攻击

2. 辅助性技能
逻辑：Caster HP+
    Caster1_HP+ Caster2_HP+
    防御 攻击 增加 
    法防 灵力增加 增加BUFF
    抗封
    解封
    复活    
表现：

3. 控制技能
逻辑：无法物理攻击 无法法术攻击 催眠 无法使用特技 



buff设计

控制技能 
辅助技能 

持续回合

buff效果 加减属性  加减hp
每回合开始的时候进行buff结算  buff是否被移除 buff效果显示

回合中会有buff增加 buff减去的事件
比方说封印和解封

所以skill里的effect会有是否成功的结果  施法成功 封印成功 解封成功 等




客户端登陆流程

1. 连接服务器
2. 登陆账号
3. 登陆角色
4. 加载角色场景

<img src="https://github.com/oceancx/SimpleEngine/blob/master/imgui.gif" width="50%" height="50%">



Actor类型划分与数据存储

服务器加载的时候 加载所有要同步的actor信息

召唤兽  只同步给召唤兽的玩家            客户端可以增加召唤兽 减少召唤兽
场景NPC     场景NPC只同步玩家场景的     客户端可以跟npc对话
玩家    玩家同步给所有人                
战斗NPC 同步给当前battle里的玩家        

暗雷战斗：
战斗创建的同时，创建暗雷战斗NPC 可以是玩家类型也可以是召唤兽类型，创建完成后，同步到客户端，客户端创建战场里的玩家
暗雷战斗可以有战斗模板，每次根据触发战斗玩家的水平，动态创建不同种类的actor
如果是PVE 敌方Actor就动态创建

如果是PVP 双方就都是玩家


客户端： 玩家登陆
服务器： 同步玩家登陆 同步其他玩家
客户端： 请求同步本玩家召唤兽信息
服务器： 发送玩家召唤兽信息

战斗：
PVE 同步动态创建信息 同步其他玩家信息 



###战斗中增加ACTOR

首先判断战斗类型，如果战斗类型是PVE 那么敌方增加的actor类型只能是NPC类型，己方增加的是actor类型
PVE战斗 战场负责敌方actor的动态创建和删除，己方则玩家参战





如果是PVP 敌我双方增加的都是玩家类型

玩家可以增加召唤兽 替换召唤兽 召回召唤兽

